<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="./js/populate.js"></script>
		<script src="./js/UserClass.js"></script>
		<script src="./js/LogIn.js"></script>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<title>Netflix</title>
	</head>
	<body>
	<div class="w3-top">
		<div class="w3-bar w3-black w3-card">
			<a href="#" class="w3-bar-item w3-button w3-padding-large w3-red">Netflix</a>
		</div>
	</div>
	<div class="w3-content" style="max-width:2000px;margin-top:46px">
		<div class="movieSlides w3-display-container w3-center">
			<img src="img/SWRO.jpg" style="width:100%" height="900px">
			<div class="w3-display-bottommiddle w3-container w3-text-white w3-padding-32 w3-hide-small">
				<h3>Endgame</h3>
				<p><b>La batalla continua</b></p>
			</div>
		</div>
		<div class="movieSlides w3-display-container w3-center">
			<img src="img/NaranjaMecanica.jpg" style="width:100%" alt="" height="900px">
			<div class="w3-display-bottommiddle w3-container w3-text-white w3-padding-32 w3-hide-small">
				<h3>Joker</h3>
				<p><b>el payaso mas loco</b></p>
			</div>
		</div>
		<div class="movieSlides w3-display-container w3-center">
			<img src="img/KillBill1.jpg" style="width:100%" height="900px">
			<div class="w3-display-bottommiddle w3-container w3-text-white w3-padding-32 w3-hide-small">
				<h3>Green Book</h3>
				<p><b>Las mejores batallas contra el racismo americano</b></p>
			</div>
		</div>
	</div>
	<div class="w3-display-middle" style="width:25%">
		<div class="w3-bar w3-black">
			<button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'Login');"><i class="fa fa-envelope w3-margin-right"></i>Login</button>
			<button class="w3-bar-item w3-button tablink" onclick="openLink(event, 'SingUp');"><i class="fa fa-user-plus w3-margin-right"></i>Signup</button>
		</div>
		<div id="Login" class="w3-container w3-white w3-padding-16 myLink">
			<h3>Bienvenido de Vuelta</h3>
			<div class="w3-row-padding" style="margin:0 -16px;">
				<div class="w3-half">
					<label>Correo</label>
					<input class="w3-input w3-border" id="NameInput" type="email" placeholder="aaaaaa@dominio.com">
				</div>
				<div class="w3-half">
					<label>Password</label>
					<input class="w3-input w3-border" id="PassInt" type="password" placeholder="Password">
				</div>
			</div>
			<p><button class="w3-button w3-dark-grey" onclick="Login()">Login</button></p>
		</div>

		<div id="SingUp" class="w3-container w3-white w3-padding-16 myLink">
			<h3>Registro a una nueva experiencia</h3>
			<div class="w3-rest">
				<label>Nombre</label>
				<input class="w3-input w3-border" type="text" placeholder="Nombre con apellidos" id="nombre">
			</div>
			<div class="w3-rest">
				<label>Correo</label>
				<input class="w3-input w3-border" type="email" placeholder="usuario@micorreo.com" id="correo">
			</div>
			<div class="w3-rest">
				<label>Password</label>
				<input class="w3-input w3-border" type="password" placeholder="Password" id="newpass">
			</div>
			<p><button class="w3-button w3-dark-grey" onclick = "SignUp()">Registrate</button></p>
		</div>

	</div>

	<script>
	 var slideIndex = 0;
	 showSlides();

	 function showSlides() {
		 var i;
		 var slides = document.getElementsByClassName("movieSlides");
		 for (i = 0; i < slides.length; i++) {
			 slides[i].style.display = "none";
		 }
		 slideIndex++;
		 if (slideIndex > slides.length) {slideIndex = 1}
		 for (i = 0; i < slides.length; i++) {
			 slides[i].className = slides[i].className.replace(" active", "");
		 }
		 slides[slideIndex-1].style.display = "block";
		 slides[slideIndex-1].className += " active";
		 setTimeout(showSlides, 2000); // Change image every 2 seconds
	 }
	 function openLink(evt, linkName) {
		 var i, x, tablinks;
		 x = document.getElementsByClassName("myLink");
		 for (i = 0; i < x.length; i++) {
			 x[i].style.display = "none";
		 }
		 tablinks = document.getElementsByClassName("tablink");
		 for (i = 0; i < x.length; i++) {
			 tablinks[i].className = tablinks[i].className.replace(" w3-red", "");
		 }
		 document.getElementById(linkName).style.display = "block";
		 evt.currentTarget.className += " w3-red";
	 }

	 // Click on the first tablink on load
	 document.getElementsByClassName("tablink")[0].click();
	 // Erase from here
	 var pass = "constante";
	 var UserTest = new User(101, "Humberto Perez", "patito100", "free", 25, "Humberto101" )
	 UserTest.toMemorie()
	 //To here
	 var Ucounter = 0
	 localStorage.setItem("NoUsers", 0)
	 function populateDB(){
		 for(var i = 0; i < 20; i++){
			 localStorage.setItem("NoUsers", i);
			 Ucounter = i;
			 var id  = localStorage.getItem("NoUsers");
			 var Fullname = {"Fname" : names[Math.floor((Math.random() * names.length - 1) + 1)],
											 "Lname" : lastnames[Math.floor((Math.random() * lastnames.length -1) + 1)] + "@itesm.mx"
			 }
			 var PayInfo = {"name": cardType[Math.floor((Math.random() * cardType.length - 1) + 1)],
											"number" : cardNumber(),
											"expDate" : ExpDate()
			 }
			 var UsrName = Fullname.Fname + id;
			 var UsuarioCreado = CreateUser(id, Fullname, pass, PayInfo, 50, UsrName)
			 UsuarioCreado.toMemorie();
		 }
	 }
	 populateDB()
	 function Login(){
		 var NoUsuarios = Number(localStorage.getItem("NoUsers")) ;
		 var email = document.getElementById("NameInput").value;
		 var passWord = document.getElementById("PassInt").value;
		 if(passWord.value == "" || email.value == ""){
			 alert("Es necesario el usuario y la contrasena")
		 }else{
			 for(var i = 0; i <= NoUsuarios; i ++) {
				 var usuario = JSON.parse(localStorage.getItem( i ) );
				 console.log("Lo que trae el local " + usuario.name.Lname + " Lo que puse como usuario " + email)
				 if( usuario.name.Lname == email && usuario.pass == passWord){
					 //Goto Catalogo
					 window.location.href = "http://www.google.com";
					 break;
				 }
			 }
		 }
	 }
	 //Falta el campo de la edad
	 function SignUp(){
		 var nextId = Number(localStorage.getItem("NoUsers")) + 1;
		 var nombreIn = document.getElementById("nombre").value;
		 var emailIn = document.getElementById("correo").value;
		 var passIn = document.getElementById("newpass").value;
		 var fullName = {"Fname" : nombreIn,
										 "Lname" : emailIn,}
		 var NuevoUsuario  = new User (nextId, fullName, passIn, null, null, nombreIn + nextId);
		 NuevoUsuario.toMemorie();
		 console.log(NuevoUsuario);
		 localStorage.setItem("NoUsers", nextId)
	 }
	</script>
	</body>
</html>
