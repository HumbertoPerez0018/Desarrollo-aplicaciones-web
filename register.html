<html>
	<head>
		<script src="./js/populate.js"></script>
		<script src="./js/UserClass.js"></script>
		<script src="./js/LogIn.js"></script>
		<script src="./js/Registro.js"></script>
	</head>
	<body>
		<form action="/action_page.php">
			<label for="birthday">Birthday:</label>
			<input type="date" id="birthday" name="birthday">
			<button type="button" onclick="resgiterUser()">Registrar</button>
		</form>
	</body>
	<script>
	 // Erase from here

	 var numeroDeUsuarios = 20
	 var pass = "constante";
	 var UserTest = new User(101, "Humberto Perez", "patito100", "free", 25, "Humberto101" )
	 UserTest.toMemorie()
	 //To here

	 // Register from here
	 console.log(localStorage.getItem("NoUsers"));
	 function resgiterUser(){
		 console.log("test");
		 createNewUser( "usuarioDEFuncion", "password", "MS", "30", "Antonio20");
		 numeroDeUsuarios = Number(localStorage.getItem("NoUsers")) +  1;
		 localStorage.setItem("NoUsers", numeroDeUsuarios)
		 bDayToAge()
	 }
	 function bDayToAge(){
		 var bDay =document.getElementById("birthday").value;
		 var dob = bDAy;
		 //calculate month difference from current date in time
		 var month_diff = Date.now() - dob.getTime();
		 //convert the calculated difference in date format
		 var age_dt = new Date(month_diff);
		 //extract year from date    
		 var year = age_dt.getUTCFullYear();
		 //now calculate the age of the user
		 var age = Math.abs(year - 1970);
		 //display the calculated age
		 console.log("Age of the date entered: " + age + " years");
	 }
	 // To here register

	 

	 var Ucounter = 0
   localStorage.setItem("NoUsers", 20)
	 function initFunc(){
		 var fuser = new User(1, "pedro", "pass", "MC", 40);
		 populateDB()
		 logIn()
	 }
	 function populateDB(){
		 for(var i = 0; i < 20; i++){
			 localStorage.setItem("NoUsers", i);
			 Ucounter = i;
			 console.log(Ucounter);
			 var id  = localStorage.getItem("NoUsers");
			 var Fullname = {"Fname" : names[Math.floor((Math.random() * names.length - 1) + 1)],
											 "Lname" : lastnames[Math.floor((Math.random() * lastnames.length -1) + 1)]
			 }
			 var PayInfo = {"name": cardType[Math.floor((Math.random() * cardType.length - 1) + 1)],
											"number" : cardNumber(),
											"expDate" : ExpDate()
			 }
			 var UsrName = Fullname.Fname + id;
			 var UsuarioCreado = CreateUser(id, Fullname, pass, PayInfo, 50, UsrName)
			 UsuarioCreado.toMemorie();
		 }
	 }
	 function logIn(){
		 //fromDoc get User name
		 var RightUser = null
		 var fromDocU = "Humberto101";
		 var fromDocP = "patito100";
		 //fromDoc get password
		 var Userinfo = null
		 for( var i = 0; i <= Ucounter; i ++ ){
			 Userinfo = localStorage.getItem(i);
			 Userinfo = JSON.parse(Userinfo);
			 console.log(Userinfo);
			 if( Userinfo.Uname == fromDocU){
				 if( Userinfo.pass == fromDocP){
					 console.log("usuario Valido, ve a la pagina home")
					 RightUser = true
					 break;
				 }
			 }
		 }
		 if(RightUser == true){
			 console.log("usuario verficado");
		 }
		 else{
			 console.log("usuario Incorrecto");
		 }
	 }
	</script>
</html>
